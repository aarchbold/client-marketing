$.fn.handleNewsletter=function(){function e(){i.prop("disabled",!0),o.prop("disabled",!0),u.show()}function s(){i.prop("disabled",!1),o.prop("disabled",!1),u.hide()}function n(){i.removeClass("-error"),l.hide(),a.hide(),i.val(i.val().trim()),m.test(i.val())?(e(),t(i.val())):(d.html(c),l.show(),i.addClass("-error"))}function t(e){console.log("signs up for email service");var n="https://cxmdzic2yc.execute-api.us-east-1.amazonaws.com/prod/track",t="email="+e;$.post(n,t,function(){a.show(),l.hide(),p.hide(),s()}).fail(function(e){e&&e.responseText?d.html(JSON.parse(e.responseText).error):d.html(c),a.hide(),l.show(),i.addClass("-error"),s()})}var r=$(this),i=$(".newsletter-signup__input",r),o=$(".button__signup",r),a=$(".newsletter-signup__form.-success",r),l=$(".newsletter-signup__form.-fail",r),p=$(".newsletter-signup__form.-entry",r),u=$(".newsletter-signup__spinner",r),d=$(".newsletter-signup__error-msg",r),c="Oops! Something went wrong. Please make sure you've entered a valid Email address.",m=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i;o.click(function(e){e.preventDefault(),n()}),i.keyup(function(e){13===e.which&&n()})},$(function(){$(".newsletter-signup").handleNewsletter()});