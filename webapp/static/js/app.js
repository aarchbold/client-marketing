function sendSMS(e){var o=($(".section-intro__form.-entry"),$(".section-intro__form.-success")),s=$(".section-intro__form.-fail"),a=$(".intro-shiffy"),n=$(".section-intro__spinner"),t=$(".button__signup"),i=e.phone.value,l={tags:[],channel:"Website",feature:"TextMeTheApp",data:{foo:"bar"}},r={};t.prop("disabled",!0),n.show();var d=function(e,i){e?(s.show(),a.hide(),t.prop("disabled",!1),n.hide()):(s.hide(),o.show(),a.hide(),t.prop("disabled",!1),n.hide(),fbq("trackCustom","CompleteTextLink"),ga("send","event","Shyft For Teams","User requested a text link to the app","Marketing Site"))};branch.sendSMS(i,l,r,d),e.phone.value=""}function handleMobileSlider(){var e=$(".features-slider--mobile");e.slick({prevArrow:$(".features-controls__prev--mobile"),nextArrow:$(".features-controls__next--mobile")}),e.on("beforeChange",function(o,s,a,n){n<4?(e.removeClass("-slide2"),e.removeClass("-slide3"),e.addClass("-slide1")):n>3&&n<8?(e.removeClass("-slide1"),e.removeClass("-slide3"),e.addClass("-slide2")):n>7&&n<12&&(e.removeClass("-slide1"),e.removeClass("-slide2"),e.addClass("-slide3"))})}window.shyft={curSlide:1},$.fn.handleFeatureSlides=function(){function e(){var e=$(window).height(),o=$(window).width(),a=Math.floor($(window).height()/1.65);e>1200&&(e=1200),e>.8*o&&(a=372),e<.8*o&&s.css("min-height",function(){return e+60}),$(".features-item img").each(function(e,o){$(o).show(),$(o).height(a)})}function o(e){a.attr("class",""),a.addClass("features-top -slide"+e),n.each(function(o,s){$(s).hide(),$(s).hasClass("features-controls__slide"+e)&&$(s).fadeIn()}),t.each(function(o,s){$(s).hide(),$(s).hasClass("features-slide"+e)&&($(".features-item").each(function(e,o){$(o).css("transform","translateY(100%)")}),$(s).show(),$(".features-item",$(s)).each(function(e,o){0===e?window.setTimeout(function(){$(o).css("transform","translateY(0)")},100):1===e?window.setTimeout(function(){$(o).css("transform","translateY(0)")},200):2===e&&window.setTimeout(function(){$(o).css("transform","translateY(0)")},300)}))})}var s=$(this),a=$(".features-top",s),n=$(".features-controls__text p",s),t=$(".feature-slide",s),i=$(".features-controls__prev",s),l=$(".features-controls__next",s);i.click(function(e){e.preventDefault(),$("html, body").animate({scrollTop:s.offset().top+30},0),1===window.shyft.curSlide?window.shyft.curSlide=3:window.shyft.curSlide=window.shyft.curSlide-1,o(window.shyft.curSlide)}),l.click(function(e){e.preventDefault(),$("html, body").animate({scrollTop:s.offset().top+30},0),3===window.shyft.curSlide?window.shyft.curSlide=1:window.shyft.curSlide=window.shyft.curSlide+1,o(window.shyft.curSlide)}),e(),$(window).resize(function(){e()})},$(function(){window.setTimeout(function(){$(".intro-shiffy").addClass("-show-shiffy").delay(500).queue(function(e){$(".intro-shiffy__quote").addClass("-animate"),e()})},800),window.setTimeout(function(){$(".intro-shiffy__quote-text").show()},1600),$(".section-features").handleFeatureSlides(),$(window).resize(function(){}),handleMobileSlider()}),$.fn.handleMenu=function(){var e=$(this),o=$(".topnav-links__mobile-button",e),s=$(".topnav-links-container",e);o.click(function(e){e.preventDefault(),o.hasClass("fa-bars")?(o.addClass("fa-times"),o.removeClass("fa-bars"),s.fadeIn(),s.css("display","inline-block")):(o.addClass("fa-bars"),o.removeClass("fa-times"),s.fadeOut())})},$.fn.handleRequestDemo=function(){function e(e){function o(){var e={Fullname:r.val(),Jobtitle:d.val(),Email:c.val(),Phone:u.val(),Company:f.val(),Employees:h.val()},o={FullName:r.val(),JobTitle:d.val(),Email:c.val(),Phone:u.val(),Company:f.val(),Employees:h.val()};o=JSON.stringify(o),$.ajax({type:"POST",url:"https://a3uz2ncpl3.execute-api.us-west-2.amazonaws.com/prod/send_email",data:o,success:function(e){console.log("got message")},error:function(){console.log("error in the api call")},dataType:"json"}),mixpanel.track("DemoRequest",e,function(e){console.log("Mixpanel tracked!"),console.log(e),_.html(r.val()),w.hide(),C.hide(),p.show(),y.show()})}function a(){var e=!0;""===r.val()?r.addClass("-error"):r.removeClass("-error"),""===d.val()?d.addClass("-error"):d.removeClass("-error"),""!==c.val()&&v.test(c.val())?c.removeClass("-error"):c.addClass("-error"),""===u.val()?u.addClass("-error"):u.removeClass("-error"),""===f.val()?f.addClass("-error"):f.removeClass("-error"),"0"===h.val()?h.addClass("-error"):h.removeClass("-error"),l.each(function(o,s){console.log(s),$(s).hasClass("-error")&&(e=!1)}),"0"===h.val()&&(e=!1),!0===e&&o()}var n=e,t=$(".modal-button__close",n),i=$(".-close",n),l=$(".modal-input",n),r=$("#fullName",n),d=$("#jobTitle",n),c=$("#workEmail",n),u=$("#phoneNumber",n),f=$("#companyName",n),h=$("#numEmployees",n),m=$("#requestDemo",n),v=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|jobs|name|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i,w=$(".modal-header.-request",n),p=$(".modal-header.-thanks",n),C=$(".modal-content.-request",n),y=$(".modal-content.-thanks",n),_=$(".form-firstname",n);m.click(function(e){e.preventDefault(),a()}),i.click(function(e){e.preventDefault(),s()}),e.click(function(o){$(o.target).hasClass("modal-overlay")&&(e.empty(),e.removeClass("-active"),e.remove(),$("body").css("overflow","visible"),window.location.hash="#close")}),$(window).on("hashchange",function(){"#requestInfo"!==window.location.hash&&t.trigger("click")}),t.click(function(e){e.preventDefault(),s()})}function o(){window.location.hash="#requestInfo",$sliderOverlay.addClass("-show"),$slider.addClass("-show"),n.css("overflow","hidden"),$slider.load("includes/request-demo.html",function(){e($slider)})}function s(){window.location.hash="#close",$sliderOverlay.removeClass("-show"),$slider.removeClass("-show"),n.css("overflow","visible")}var a=$(this),n=$("body");$sliderOverlay=$(".page-slider__overlay"),$slider=$(".page-slider"),a.click(function(e){e.preventDefault(),window.location.hash="#requestInfo",o()}),$sliderOverlay.click(function(){s()})},$(function(){$(".button-rquest-demo").handleRequestDemo(),$(".topnav-container").handleMenu()});