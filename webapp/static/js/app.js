$.fn.handleNewsletter=function(){function e(){t.prop("disabled",!0),o.prop("disabled",!0),p.show()}function i(){t.prop("disabled",!1),o.prop("disabled",!1),p.hide()}function n(e){console.log("signs up for email service");var n="http://www.someurl.com/api/capture_email",s={email:e};$.post(n,JSON.stringify(s),function(){r.show(),a.hide(),l.hide(),i()}).fail(function(e){r.hide(),a.show(),t.addClass("-error"),i()})}var s=$(this),t=$(".newsletter-signup__input",s),o=$(".button__signup",s),r=$(".newsletter-signup__form.-success",s),a=$(".newsletter-signup__form.-fail",s),l=$(".newsletter-signup__form.-entry",s),p=$(".newsletter-signup__spinner",s),u=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i;o.click(function(i){i.preventDefault(),t.removeClass("-error"),a.hide(),r.hide(),u.test(t.val())?(e(),n(t.val())):(a.show(),t.addClass("-error"))})},$(function(){$(".newsletter-signup").handleNewsletter()});